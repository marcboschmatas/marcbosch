[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "About",
    "section": "",
    "text": "Aquí penjaré mapes, gràfics, idees que em passen pel cap. Moltes coses sobre ciutats."
  },
  {
    "objectID": "blog.html",
    "href": "blog.html",
    "title": "Blog",
    "section": "",
    "text": "tidytuesday\n\n\nggplot\n\n\nmuseus\n\n\nR\n\n\n\n\n\n\n\n\n\n\n\nNov 23, 2022\n\n\nMarc Bosch\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/post-with-code/index.html",
    "href": "posts/post-with-code/index.html",
    "title": "Post With Code",
    "section": "",
    "text": "1 + 1\n\n[1] 2"
  },
  {
    "objectID": "posts/welcome/index.html",
    "href": "posts/welcome/index.html",
    "title": "Welcome To My Blog",
    "section": "",
    "text": "Since this post doesn’t specify an explicit image, the first image in the post will be used in the listing page of posts."
  },
  {
    "objectID": "posts/new/20221123.html",
    "href": "posts/new/20221123.html",
    "title": "Tidy Tuesdays 23/11/2022",
    "section": "",
    "text": "El Tidy Tuesday és una iniciativa on cada setmana es penja un conjunt de dades a Github i tothom en pot fer una visualització. Avui va de museus.\n\n\nShow the code\n# libraries\n#| output: false\nlibrary(tidyverse)\nlibrary(tidytuesdayR)\nlibrary(knitr)\nlibrary(patchwork)\nlibrary(modthemes)\n# get data\ntt <- tidytuesdayR::tt_load(last_tuesday())[[1]]\n\n\n\n    Downloading file 1 of 1: `museums.csv`\n\n\nLa base de dades recull tot d’informació sobre els museus del Regne Unit: on són, quina mida tenen, de què van… Dedica diverses columnes a índexs de deprivació. Podem fer un retrat robot dels museus en cinc àrees segons índex de deprivació: molt baix, baix, mitjà, alt, molt alt.\n\n\nShow the code\ntt <- tt |> \n  filter(!is.na(Area_Deprivation_index)) |> \n  mutate(\"deprivation_index_quantiles\" = cut(Area_Deprivation_index,\n                                         breaks = c(-1,2,4,6,8,10),\n                                         labels = c(\"Molt alt\",\n                                                    \"Alt\",\n                                                    \"Mitjà\",\n                                                    \"Baix\",\n                                                    \"Molt baix\"))) \n\n\n\n\nShow the code\np1 <- ggplot(tt,\n             aes(x = deprivation_index_quantiles)) + \n  geom_bar(colour = \"black\",\n           fill = NA) + \n  theme_classic(base_family = \"Roboto condensed\") +\n  labs(title = \"Número de museus per àrea\") +\n  theme(axis.title.x = element_blank(),\n        axis.title.y = element_blank())\nproportions <- tt |> \n  mutate(\"titularitat\" = str_extract(Governance,\".*(?=\\\\-)\")) |> \n  group_by(deprivation_index_quantiles) |> \n  summarise(n = n())\np2 <- tt |> \n  mutate(titularitat = str_extract(Governance,\".*(?=\\\\-)\")) |> \n  group_by(titularitat, deprivation_index_quantiles) |> \n  summarise(n_td = n()) |> \n  ungroup() |> \n  left_join(proportions, by = \"deprivation_index_quantiles\") |> \n  mutate(prop = n_td/n,\n         titularitat = case_when(titularitat == \"Independent\" ~ \"Privada\",\n                                 titularitat == \"Government\" ~ \"Pública\",\n                                 is.na(titularitat) ~ \"Desconeguda\")) |> \n  ggplot(aes(x = deprivation_index_quantiles,\n             y = prop,\n             fill = titularitat)) + \n  geom_bar(stat = \"identity\",\n           position = \"dodge\") +\n  scale_y_continuous(labels = scales::label_percent()) + \n  scale_fill_manual(values = modthemes::contrasting_palette) + \n  labs(title = \"Titularitat dels museus per índex de deprivació\") +\n  theme_classic(base_family = \"Roboto condensed\") + \n  theme(axis.title.x = element_blank(),\n        axis.title.y = element_blank())\n\n  \np3 <- tt |> \n  mutate(\"mida_cat\" = factor(Size,\n                             levels = c(\"small\", \"medium\", \"large\", \"huge\", \"unknown\"),\n                             labels = c(\"petit\", \"mitjà\", \"gran\", \"molt gran\", \"NS\"))) |> \n  group_by(deprivation_index_quantiles, mida_cat) |> \n  summarise(n_dt = n()) |> \n  ungroup() |> \n  left_join(proportions, by = \"deprivation_index_quantiles\") |> \n  mutate(prop = n_dt/n) |> \n  ggplot(aes(x = deprivation_index_quantiles,\n             y = prop,\n             fill = mida_cat)) + \n  geom_bar(stat = \"identity\",\n           position = \"dodge\") +\n  scale_y_continuous(labels = scales::label_percent()) + \n  scale_fill_manual(values = modthemes::contrasting_palette) + \n  labs(title = \"Museus per mida i índex de deprivació\") +\n  theme_classic(base_family = \"Roboto condensed\") + \n  theme(axis.title.x = element_blank(),\n        axis.title.y = element_blank())\np1 + p2 + p3\n\n\n\n\n\nLes conclusions no són massa sorprenents. Les zones més deprimides tenen menys museus privats i petits, però també menys de molt grans. Seria interessant veure’n la qualitat però això serà un altre dia."
  }
]